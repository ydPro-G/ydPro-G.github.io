
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Linux_正则表达式 | ydPro Blog</title>
<meta name="description" content="Life &amp; Work">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://ydPro-G.github.io//favicon.ico?v=1588858188481">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://ydPro-G.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://ydPro-G.github.io/">
        <img class="avatar" src="https://ydPro-G.github.io//images/avatar.png?v=1588858188481" alt="" width="32px" height="32px">
      </a>
      <a href="https://ydPro-G.github.io/">
        <h1 class="site-title">ydPro Blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="https://ydPro-G.github.io/post/friends" class="menu purple-link">
            关于我
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">Linux_正则表达式</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-03-17</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://ydPro-G.github.io/tag/c-x4QDjnk/">
                    Linux
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h1 id="目标">目标</h1>
<p>1.掌握基本命令：sed ,grep ,awk的用法<br>
2.掌握正则表达式符号和语法</p>
<h1 id="学习目录">学习目录</h1>
<p>1.什么是正则表达式？<br>
2.正则表达式的基本语法<br>
3.grep命令<br>
4.sed流编辑器<br>
5.awk文本处理语言</p>
<hr>
<h2 id="1什么是正则表达式">1.什么是正则表达式？</h2>
<p>在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。正则表达式就是记录文本规则的代码。<br>
下面通过<code>grep，sed和awk</code>命令来实际演示正则表达式如何使用。<br>
<a href="https://www.jb51.net/tools/zhengze.html">参考网址</a></p>
<hr>
<h2 id="2正则表达式的基本语法">2.正则表达式的基本语法</h2>
<p>一个正则表达式通常被称为一个pattern，为用来描述或者匹配一系列符合某个句法规则的字符串。</p>
<h3 id="选择">选择</h3>
<p><code>|</code>:表示选择。<br>
实例： <code>boy|girl</code>可以匹配boy或girl。</p>
<h3 id="限定数量">限定数量</h3>
<p><code>+</code>:表示<code>+</code>号前面的字符必须出现至少一次或多次。<br>
实例：<code>&quot;goo+gle&quot;</code>可以匹配出<code>gooogle，goooogle</code>。</p>
<p><code>?</code>;表示<code>?</code>前面的字符最多出现一次（0次或1次）。<br>
实例：<code>&quot;colou？r&quot;</code>可以匹配<code>color，colour</code>。</p>
<p><code>*</code>:表示<code>*</code>前面的字符可以不出现也可以出现一次或多次。<br>
实例：<code>&quot;0*42&quot;</code>可以匹配<code>42,042,0042,00042</code>。</p>
<h3 id="范围和优先级">范围和优先级</h3>
<p><code>()</code>圆括号可以用来定义模式字符串的范围和优先级。</p>
<h3 id="语法">语法</h3>
<p><code>\</code>:<strong>将下一个字符标记为一个特殊字符或一个原义字符。</strong><br>
<code>^</code>:匹配<strong>输入字符串开始的位置。</strong><br>
<code>$</code>:匹配<strong>输入字符串的结束位置。</strong><br>
<code>{n}</code>:n是一个非负整数<strong>匹配确定的n次。</strong><br>
实例：<code>&quot;o{2}&quot;</code>不能匹配<code>Bob</code>中的<code>o</code>，但是能匹配<code>food</code>中的两个<code>o</code>。<br>
<code>{n,}</code>:n是一个非负整数，<strong>至少匹配n次。</strong><br>
实例：<code>&quot;o{2,}&quot;</code>不能匹配<code>Bob</code>中的<code>o</code>，但是能匹配<code>fooooood</code>中的所有<code>o</code>。<code>o{1,}</code>等价于<code>o+</code>。<code>o{0,}等价于o*</code>.<br>
<code>{n,m}</code>:m和n均为非负整数，其中n&lt;=m。<strong>最少匹配<code>n</code>次且最多匹配<code>m</code>次。</strong><br>
<code>*</code>:匹配前面的子表达式零次或多次。例如，<code>zo*</code>能匹配<code>“z”、“zo”以及“zoo”</code>。*等价于<code>{0,}</code><br>
<code>+</code>:匹配前面的子表达式一次或多次。<br>
<code>?</code>:匹配前面的子表达式零次或一次。<br>
<code>.</code>:匹配除<code>\n</code>之外的任何单个字符。<br>
<code>（pattern）</code>:匹配pattern并获取这一匹配的子字符串。<br>
<code>x|y</code>:匹配x或y。<br>
<code>[xyz]</code>:字符集合。匹配所包含的任一字符。<br>
<code>[^xyz]</code>:排除型字符集合。匹配未列出的任意字符。<br>
<code>[a-z]</code>:字符范围。匹配指定范围内的任意字符。<br>
<code>[^a-z]</code>:排除型字符范围。匹配任何不在指定范围内的任意字符。<br>
【思维导图】</p>
<hr>
<h2 id="3grep命令">3.grep命令</h2>
<p>grep命令用于打印输出文本中匹配的模式串，它使用正则表达式作为模式匹配的条件。</p>
<h4 id="grep支持的三种正则表达式引擎">grep支持的三种正则表达式引擎</h4>
<p>1.<code>-E</code>:POSIX扩展正则表达式 ERE<br>
2.<code>-G</code>：POSIX基本正则表达式 BRE<br>
3.<code>-p</code>：perl正则表达式 PCRE<br>
<a href="https://wangchujiang.com/linux-command/c/grep.html">grep命令参考网址</a></p>
<h4 id="使用正则表达式bre">使用正则表达式BRE</h4>
<p>实例：</p>
<pre><code class="language-cpp">位置：
grep '^a' /etc/passwd  #查找/etc/passwd文件中以a开头的行

数量：
echo zero\nzo\nzoo | grep 'z.*o'   #匹配以z开头以o结尾的所有字符串。
echo zero\nzo\nzoo | grep 'z.o'    #匹配以z开头的以o结尾中间包含任一字符的字符串。
echo zero\nzo\nzoo | grep 'zo*'    #匹配以z开头以任意多个o结尾的字符串

选择：
nl /etc/passwd | grep '[a-z]'   #匹配/etc/passwd中所有的小写字母
nl /etc/passwd | grep '[0-9]'   #匹配/etc/passwd所有数字
nl /etc/passwd | grep '[[:digit:]]'   #匹配/etc/passwd所有数字
nl /etc/passwd | grep '[[:lower:]]'   #匹配/etc/passwd所有小写字母
nl /etc/passwd | grep '[[:upper:]]'   #匹配/etc/passwd所有大写字母
nl /etc/passwd | grep '[[:alnum:]]'   #匹配/etc/passwd所有字母和数字
nl /etc/passwd | grep '[[:alpha:]]'   #匹配/etc/passwd所有字母

排除字符
echo 'geek\ngood' | grep '[^o]'    #当^放入[]代表排除字符，o不显示
</code></pre>
<h4 id="使用扩展正则表达式ere">使用扩展正则表达式ERE</h4>
<p>要通过grep使用扩展正则表达式需要加上-E参数，或使用egrep。<br>
实例：</p>
<pre><code class="language-cpp">数量：
nl /etc/passwd | grep -E 'zo{1}'    #只匹配zo
echo 'zero\nzo\nzoo' | grep -E 'zo{1,}'    #匹配以zo开头的所有单词  

选择：
echo 'www.baidu.com\nwww.google.com\nwww.bing.com' | grep -E 'www\.(google|bing)\.com'   
#匹配www.google.com和www.bing.com
echo 'www.baidu.com\nwww.google.com\nwww.bing.com' | grep -Ev 'www\.baidu\.com'
#匹配不包含www.baidu.com的内容
PS：.号有特殊含义，需要\转义符来转义
</code></pre>
<hr>
<h2 id="4sed流编辑器">4.sed流编辑器</h2>
<p>功能强大的流式文本编辑器。<br>
sed 是一种流编辑器，它是文本处理中非常重要的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。</p>
<h3 id="sed基本格式">sed基本格式</h3>
<p><code>sed [参数]... [执行命令][输入文件]...</code><br>
<a href="https://wangchujiang.com/linux-command/c/sed.html">sed命令参考网址</a></p>
<h4 id="sed动作指令">sed动作指令</h4>
<p><code>s</code>:行内替换<br>
<code>c</code>:整行替换<br>
<code>a</code>:插到指定行的后面<br>
<code>i</code>:插到指定行的前面<br>
<code>p</code>:打印指定行，通常与<code>-n</code>参数配合使用<br>
<code>d</code>:删除指定行<br>
实例：</p>
<pre><code class="language-cpp">打印指定行（p）:
nl passwd（文件） | sed -n '2,5p'    #打印2-5行
nl passwd（文件） | sed -n '1~2p'    #打印奇数行

行内替换（s）：
sed -n 's/zsh/hehe/gp' passwd(文件)
#将输入文本中zsh全局替换为hehe，并且只打印替换的那一行

删除某行（d）:
sed -i '30d' passwd(文件)    #删除30行
</code></pre>
<hr>
<h2 id="5awk文本处理语言">5.awk文本处理语言</h2>
<p>文本和数据进行处理的编程语言。<br>
awk 是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。awk有很多内建的功能，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势。<br>
操作基于<code>pattern {action}</code>完成。<br>
实例：</p>
<pre><code class="language-cpp">准备：
vim test    #使用vim新建一个文本文档
I like Linux 
www.github.com    #输入以上内容

将文本内容打印到终端
1.
awk '{
print
}' test
2.
awk '{print}' test    #可以写多行也可以写一行

将test第一行的每个字段单独显示为一行
awk '{
if(NR==1){
print $1 &quot;\n&quot; $2 &quot;\n&quot; $3 &quot;\n&quot;
} else {
print}
}' test    #NR是awk内建的变量，表示当前处理的行数。 $n中的n为相应的字段号
或者
awk '{
if(NR==1){
OFS=&quot;\n&quot;
print $1,$2,$3
} else {
print}
}' test    #OFS是awk内建的变量，表示输出时的字段分隔符，默认为空格。    

将test的第二行以点分布的字段换成以空格为分隔
awk -F'.' '{
if(NR==2){
print $1 &quot;\t&quot; $2 &quot;\t&quot; $3 &quot;\t&quot;    #print打印的非变量内容都需要用&quot;&quot;包围起来
}}' test    #-F用来预先指定待处理记录的字段分隔符
或者
awk '
BEGIN{    #BEGIN这个表达式指示了其后的动作将在所有动作之前执行。
FS=&quot;.&quot;
OFS=&quot;\t&quot;
}{
if(NR==2){
print $1,$2,$3
}}' test    
</code></pre>
<p><a href="https://coolshell.cn/articles/9070.html">参考网址1</a><br>
<a href="https://awk.readthedocs.io/en/latest/chapter-one.html">参考网址2</a></p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://ydPro-G.github.io/post/linux_-cha-kan-li-shi-shu-ju-ming-ling/">
              <h3 class="post-title">
                下一篇：Linux_查看历史数据/命令
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">Life & Work</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://ydPro-G.github.io//atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
